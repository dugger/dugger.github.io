<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Nil as a Hash Key – alex_dugger $&gt;</title>
    <meta name="description" content="This is something you can do, but should you…">
    <meta name="keywords" content="">
    <link rel="canonical" href="http://riot-gear.net/nil-as-a-hash-key/">
        <!-- Twitter Cards -->
    <meta name="twitter:title" content="Nil as a Hash Key">
    <meta name="twitter:description" content="This is something you can do, but should you…">
    <meta name="twitter:site" content="@alexdugger">
    <meta name="twitter:creator" content="@alexdugger">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="http://riot-gear.net/assets/img/profile.png">
    <!-- Open Graph -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Nil as a Hash Key">
    <meta property="og:description" content="This is something you can do, but should you…">
    <meta property="og:url" content="http://riot-gear.net/nil-as-a-hash-key/">
    <meta property="og:site_name" content="alex_dugger $&gt;">
    <meta property="og:image" content="http://riot-gear.net/assets/img/profile.png">

    
    
    <!-- Handheld -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="http://riot-gear.net/assets/img/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://riot-gear.net/assets/img/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://riot-gear.net/assets/img/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://riot-gear.net/assets/img/favicon/apple-touch-icon-144x144.png">
    <link rel="icon" type="image/png" href="http://riot-gear.net/assets/img/favicon/favicon.png">
    <link rel="shortcut icon" href="http://riot-gear.net/assets/img/favicon/favicon.ico">
    <!-- Feed -->
    <link rel="alternate" type="application/rss+xml" title="alex_dugger $&gt;" href="http://riot-gear.net/feed.xml">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="http://riot-gear.net/assets/css/main.css">
</head>

  <body>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
      $(function() {
        i = 0;
        $('.menuAc').css({
          'color': 'rgba(52, 152, 219, 1)'
        });
        $('.menuAc').click(function(){
          $(this).next('.menuMobil').animate({width:'toggle'},350);
          if (i%2==0) {
            $('.footer').css({
              'filter'         : 'blur(5px)'
            });
            $('.yazilar').css({
              'filter'         : 'blur(5px)'
            });
            $('.ust').css({
              'filter'         : 'blur(5px)'
            });
            $('ul.menu').css({
              'animation-duration': '0.1s'
            });
            i++;
          }
          else {
            $('.footer').css({
              'filter'         : 'blur(0px)'
            });
            $('.yazilar').css({
              'filter'         : 'blur(0px)'
            });
            $('.ust').css({
              'filter'         : 'blur(0px)'
            });
            i++;
          }

        });
      });
    </script>
    <div class="menuAc">
      <i class="fa fa-bars" aria-hidden="true"></i>
    </div>
    <div class="menuMobil">
          <nav class="nav-home">
      <ul class="menu">
            
				    
				    <li><a class="link" href="http://riot-gear.net/">Home</a></li>
				
				    
				    <li><a class="link" href="http://riot-gear.net/blog/">Blog</a></li>
				
				    
				    <li><a class="link" href="http://riot-gear.net/projects/">Projects</a></li>
				
				    
				    <li><a class="link" href="http://riot-gear.net/resume/">Resume</a></li>
				
        </ul>
    </nav>

    </div>
    <div class="ust">
      <div class="ortalaAna">
        <div class="baslikAna">
          alex_dugger $&gt;
        </div>

        <div class="pc">
              <nav class="nav">
        <ul class="menuAna">
            
				    
				    <li class="item"><a class="link" href="http://riot-gear.net/">Home</a></li>
				
				    
				    <li class="item"><a class="link" href="http://riot-gear.net/blog/">Blog</a></li>
				
				    
				    <li class="item"><a class="link" href="http://riot-gear.net/projects/">Projects</a></li>
				
				    
				    <li class="item"><a class="link" href="http://riot-gear.net/resume/">Resume</a></li>
				
        </ul>
    </nav>

        </div>
      </div>
    </div>
    <div class="ortalaAna">
      <div class="yazilar">
        <div class="yazi">
          <div class="ustr">
            <h2>Nil as a Hash Key</h2>
            <div class="yazibilgisi">
              02 Oct 2015
            </div>
          </div>
          <hr>
          <div class="content">
            <p>I was doing a little code review with a teammate and one of his hash definitions caught my eye.  It looked something like this…</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">hsh</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:foo</span> <span class="o">=&gt;</span> <span class="no">Foo</span><span class="p">,</span>
  <span class="ss">:bar</span> <span class="o">=&gt;</span> <span class="no">Bar</span><span class="p">,</span>
  <span class="kp">nil</span>  <span class="o">=&gt;</span> <span class="no">Qux</span>
<span class="p">}</span></code></pre></figure>

<p>This had nothing to do with our conversation, but… ‘nil’? “Can you really use ‘nil’ as a Hash key?” I asked.  Apparently you can. After all (<a href="https://youtu.be/OMPfEXIlTVE">as Sandi Metz taught us</a>) nothing IS something. So, I tried it, and sure enough, it works.  You can use the ‘active nothing’ in this way.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">k1</span> <span class="o">=</span> <span class="n">method_that_might_return_a_symbol</span><span class="p">()</span>
<span class="c1">#=&gt; :foo</span>
<span class="n">hsh</span><span class="p">[</span><span class="n">k1</span><span class="p">].</span><span class="nf">new</span>
<span class="c1">#=&gt; #&lt;Foo:0x007fc8b203b970&gt;</span>
<span class="n">key</span> <span class="o">=</span> <span class="n">method_that_might_return_a_symbol</span><span class="p">()</span>
<span class="c1">#=&gt; nil</span>
<span class="n">hsh</span><span class="p">[</span><span class="n">key</span><span class="p">].</span><span class="nf">new</span>
<span class="c1">#=&gt; #&lt;Qux:0x007fc8b203b970&gt;</span></code></pre></figure>

<p>Now, I’m not sure there is a huge use case for this, but it is cleaner than writing a condition to ensure the Hash has a value before calling it, so it might have some uses.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">hsh</span><span class="p">[</span><span class="n">key</span><span class="p">].</span><span class="nf">new</span> <span class="k">if</span> <span class="n">hsh</span><span class="p">[</span><span class="n">key</span><span class="p">]</span></code></pre></figure>

<p>However, this doesn’t let you get around passing a key.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">hsh</span><span class="p">[]</span>
<span class="c1">#=&gt; ArgumentError: wrong number of arguments (0 for 1)</span></code></pre></figure>

<p>That is, unless you do this first…</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Hash</span>
  <span class="nc">SETTER</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">instance_method</span><span class="p">(</span><span class="ss">:[]=</span><span class="p">)</span>
  <span class="no">GETTER</span> <span class="o">=</span> <span class="no">Hash</span><span class="p">.</span><span class="nf">instance_method</span><span class="p">(</span><span class="ss">:[]</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">[]=</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="kp">nil</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="no">SETTER</span><span class="p">.</span><span class="nf">bind</span><span class="p">(</span><span class="nb">self</span><span class="p">).</span><span class="nf">call</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">[]</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="kp">nil</span><span class="p">)</span>
    <span class="no">GETTER</span><span class="p">.</span><span class="nf">bind</span><span class="p">(</span><span class="nb">self</span><span class="p">).</span><span class="nf">call</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p>…but you should probably never do that.</p>

          </div>
        </div>
        <script src="http://riot-gear.net/assets/js/jquery-1.12.2.min.js"></script>
<script src="http://riot-gear.net/assets/js/jquery.goup.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $.goup({
        trigger: 500,
        bottomOffset: 10,
        locationOffset: 20,
        containerRadius: 0,
        containerColor: '#fff',
        arrowColor: '#000',
        goupSpeed: 'normal'
    });
});
</script>


        

      </div>
    </div>
        <div class="footer">
      <div class="ortalaAna">
        <div class="copy">
          Alex Dugger © 2017
        </div>
        <div class="sosyal">
                        <div class="social-links">
                  <a href="mailto:alex@riot-gear.net" class="author-social" target="_blank"><i class="fa fa-2x fa-envelope-square"></i></a>
                  <a href="http://twitter.com/alexdugger" class="author-social" target="_blank"><i class="fa fa-2x fa-twitter-square"></i></a>
                  
                  
                  <a href="http://linkedin.com/in/alex-dugger-b2a2a9b4" class="author-social" target="_blank"><i class="fa fa-2x fa-linkedin-square"></i></a>
                  
                  
                  
                  <a href="http://github.com/dugger" class="author-social" target="_blank"><i class="fa fa-2x fa-github"></i></a>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
            </div>

        </div>
      </div>
    </div>

  </body>
</html>
